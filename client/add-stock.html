<script type="text/ng-template" id="typeahead.html">
    <a>
        <span ng-bind-html="match.model.ticker | uibTypeaheadHighlight:query"></span>
        - {{match.model.name}}
    </a>
</script>

<style>
.gly-spin {
    -webkit-animation: spin 2s infinite linear;
    -moz-animation: spin 2s infinite linear;
    -o-animation: spin 2s infinite linear;
    animation: spin 2s infinite linear;
}
@-moz-keyframes spin {
    0% {
        -moz-transform: rotate(0deg);
    }
    100% {
        -moz-transform: rotate(359deg);
    }
}
@-webkit-keyframes spin {
    0% {
        -webkit-transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
    }
}
@-o-keyframes spin {
    0% {
        -o-transform: rotate(0deg);
    }
    100% {
        -o-transform: rotate(359deg);
    }
}
@keyframes spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
.gly-rotate-90 {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    transform: rotate(90deg);
}
.gly-rotate-180 {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);
    -webkit-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    transform: rotate(180deg);
}
.gly-rotate-270 {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    -webkit-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    transform: rotate(270deg);
}
.gly-flip-horizontal {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);
    -webkit-transform: scale(-1, 1);
    -moz-transform: scale(-1, 1);
    -ms-transform: scale(-1, 1);
    -o-transform: scale(-1, 1);
    transform: scale(-1, 1);
}
.gly-flip-vertical {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);
    -webkit-transform: scale(1, -1);
    -moz-transform: scale(1, -1);
    -ms-transform: scale(1, -1);
    -o-transform: scale(1, -1);
    transform: scale(1, -1);
}
</style>

<form ng-submit="submit()" ng-controller="StockLookupCtrl" class="navbar-form navbar-left" role="search">

    <div uib-alert dismiss-on-timeout="5000" ng-repeat="alert in alerts" close="closeAlert($index)" ng-class="'alert-warning'">{{alert.msg}}</div>

    <pre>Stock Lookup: {{selectedSymbol.ticker}} {{selectedSymbol.name}}</pre>
    <div class="form-group">
        <input type="text"
        ng-model="selectedSymbol"
        uib-typeahead="stockInfo as stockInfo.ticker for stockInfo in stockCompanies | filter:$viewValue | limitTo:20"
        placeholder="ex: AMD, GE, MMP"
        class="form-control"
        typeahead-template-url="typeahead.html"/>
    </div>

    <button type="submit" class="btn btn-primary" ng-click="toggle = !toggle">
        <span ng-show="toggle">Submit</span>
        <span ng-hide="toggle">Loading <i class="glyphicon glyphicon-cog gly-spin"></i></span>
    </button>

    <hr>

    <div uib-accordion close-others="oneAtATime">
        <div uib-accordion-group class="panel-default" ng-repeat="group in groups">
            <uib-accordion-heading>
                {{group.ticker}} - {{group.name}}<i class="pull-right glyphicon" ng-class="'glyphicon-remove'" ng-click="removeStock($index)"></i>
            </uib-accordion-heading>
            <h5>Sector: {{group.sector}}</h5>
            <h5>Industry Category: {{group.industry_category}}</h5>
            <h5>Industry Group: {{group.industry_group}}</h5>
            <br/>

            <a href="http://www.investopedia.com/university/movingaverage/movingaverages2.asp" target="_blank">Moving Averages</a>
            <h5>MA(15): {{group.movingAverages.days15}}</h5>
            <h5>MA(50): {{group.movingAverages.days50}}</h5>
            <h5>MA(100): {{group.movingAverages.days100}}</h5>
            <h5>MA(200): {{group.movingAverages.days200}}</h5>
        </div>
    </div>
</uib-accordion>

</form>
