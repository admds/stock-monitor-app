<script type="text/ng-template" id="typeahead.html">
    <a>
        <span ng-bind-html="match.model.ticker | uibTypeaheadHighlight:query"></span>
        - {{match.model.name}}
    </a>
</script>

<div class="container-fluid" ng-controller="StockLookupCtrl" >
 <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Search</h3>
    </div>
    <div class=panel-body>
        <form ng-submit="submit()" role="search">
            <div uib-alert
            class="alert"
            dismiss-on-timeout="3000"
            ng-repeat="alert in alerts"
            close="closeAlert($index)"
            ng-class="'alert-danger'">{{alert.msg}}
            </div>

            <div class="col-sm-10">
                <input type="text" readonly="readonly" class="form-control" value="Stock Lookup: {{selectedSymbol.ticker}} {{selectedSymbol.name}}">
            </div>

            <div class="form-group col-sm-10">
                <input type="text"
                ng-model="selectedSymbol"
                uib-typeahead="stockInfo as stockInfo.ticker for stockInfo in stockCompanies | filter:$viewValue | limitTo:20"
                placeholder="Stock Symbol"
                class="form-control"
                typeahead-template-url="typeahead.html"/>
            </div>

            <div class="col-sm-10">
                <button type="submit"
                class="btn btn-primary"
                ng-disabled="submitButtonDisabled">
                Submit
                </button>
            </div>
        </form>
    </div>
</div>


    <!-- <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Search</h3>
        </div>
        <div>
            <form ng-submit="submit()" role="search">
                <div uib-alert
                class="alert"
                dismiss-on-timeout="3000"
                ng-repeat="alert in alerts"
                close="closeAlert($index)"
                ng-class="'alert-danger'">{{alert.msg}}
                </div>

                <div class="col-sm-10">
                    <input type="text" readonly="readonly" class="form-control" value="Stock Lookup: {{selectedSymbol.ticker}} {{selectedSymbol.name}}">
                </div>

                <div class="form-group col-sm-10">
                    <input type="text"
                    ng-model="selectedSymbol"
                    uib-typeahead="stockInfo as stockInfo.ticker for stockInfo in stockCompanies | filter:$viewValue | limitTo:20"
                    placeholder="Stock Symbol"
                    class="form-control"
                    typeahead-template-url="typeahead.html"/>
                </div>

                <div class="col-sm-10">
                    <button type="submit"
                    class="btn btn-primary"
                    ng-disabled="submitButtonDisabled">
                    Submit
                    </button>
                </div>
            </form>
        </div>
    </div>-->
<div class="panel panel-default">
<div class="panel-heading">
    <h3 class="panel-title">Watch List</h3>
</div>
<div class="panel-body">
    <div>
        <!-- Sort dropdown -->
        <div class="btn-group" uib-dropdown is-open="status.isopen">
            <button id="single-button" type="button" class="btn btn-default btn-primary btn-trans" uib-dropdown-toggle >
                Sort By <span class="glyphicon glyphicon-chevron-down"></span>
            </button>
            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                <li role="menuitem" >
                    <a ng-click="sortStocks('symbol')">
                        Symbol
                        <i class="glyphicon glyphicon-ok" ng-hide="orderStocksBy !== 'symbol'"></i>
                    </a>
                </li>
                <li role="menuitem">
                    <a ng-click="sortStocks('name')">
                        Company Name
                        <i class="glyphicon glyphicon-ok" ng-hide="orderStocksBy !== 'name'"></i>
                    </a>
                </li>
                <li role="menuitem">
                    <a ng-click="sortStocks('price')">
                        Current Price
                        <i class="glyphicon glyphicon-ok" ng-hide="orderStocksBy !== 'price'">
                        </i>
                    </a>
                </li>
                <li role="menuitem">
                    <a ng-click="sortStocks('sector')">Sector
                        <i class="glyphicon glyphicon-ok" ng-hide="orderStocksBy !== 'sector'"></i>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Reverse sorting button -->
        <button type="button" class="btn btn-default btn-primary btn-trans" ng-click="reverseStockSorting()">
            <span class="glyphicon glyphicon-sort"/>
        </button>
    </div>

    <!-- Favorite Stocks -->
    <div uib-accordion close-others=true>
        <div uib-accordion-group class="panel-default" ng-repeat="stockInfo in stocks | filter:{favorite:true} | orderBy:orderStocksBy:reverseStockOrder">
            <uib-accordion-heading>
                <a ng-click="selectStock(stockInfo)">{{stockInfo.symbol}} - {{stockInfo.name}}</a>
                <i class="favorite glyphicon glyphicon-heart" ng-click="favoriteStock(stockInfo.symbol)"></i>
                <i class="glyphicon glyphicon-cog gly-spin" ng-hide="!stockInfo.loading"></i>
                <i class="pull-right glyphicon glyphicon-remove"
                    ng-click="removeStock(stockInfo.symbol)"></i>
            </uib-accordion-heading>
            <p>Sector: {{stockInfo.sector}}</p>
            <p>Industry Category: {{stockInfo.industryCategory}}</p>
            <p>Industry Group: {{stockInfo.industryGroup}}</p>
            <br/>
            <p><a href="http://www.investopedia.com/university/movingaverage/movingaverages2.asp" target="_blank">Moving Averages</a><p>
            <p>MA(15): {{stockInfo.movingAverages.days15}}</p>
            <p>MA(50): {{stockInfo.movingAverages.days50}}</p>
            <p>MA(100): {{stockInfo.movingAverages.days100}}</p>
            <p>MA(200): {{stockInfo.movingAverages.days200}}</p>
        </div>
    </div>

        <hr>

    <!-- Watched Stocks -->
    <div uib-accordion close-others=true>
        <div ng-repeat="stockInfo in stocks | filter:{favorite:false} | orderBy:orderStocksBy:reverseStockOrder">
            <div uib-accordion-group
                class="panel panel-default">
                <uib-accordion-heading>
                    <a ng-click="selectStock(stockInfo)">{{stockInfo.symbol}} - {{stockInfo.name}}</a>
                    <i class="favorite glyphicon glyphicon-heart-empty" ng-click="favoriteStock(stockInfo.symbol)"></i>
                    <i class="glyphicon glyphicon-cog gly-spin" ng-hide="!stockInfo.loading"></i>
                    <i class="pull-right glyphicon glyphicon-remove"
                        ng-click="removeStock(stockInfo.symbol)"></i>
                </uib-accordion-heading>

                <p>Sector: {{stockInfo.sector}}</p>
                <p>Industry Category: {{stockInfo.industryCategory}}</p>
                <p>Industry Group: {{stockInfo.industryGroup}}</p>
                <br/>
                <p><a href="http://www.investopedia.com/university/movingaverage/movingaverages2.asp" target="_blank">Moving Averages</a><p>
                <p>MA(15): {{stockInfo.movingAverages.days15}}</p>
                <p>MA(50): {{stockInfo.movingAverages.days50}}</p>
                <p>MA(100): {{stockInfo.movingAverages.days100}}</p>
                <p>MA(200): {{stockInfo.movingAverages.days200}}</p>
            </div>
        </div>
    </div>
</div>
</div>
</div>
<div>
    <div id="container"></div>
</div>
